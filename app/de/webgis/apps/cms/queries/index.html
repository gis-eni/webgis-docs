
<!DOCTYPE html>

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Abfragen &#8212; WebGIS 2025 Dokumentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic_mod.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/eni.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/eni.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <script src="../../../_static/js/petite-vue.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../../../genindex.html" />
    <link rel="search" title="Suche" href="../../../search.html" />
    <link rel="next" title="Layer-Schaltungen" href="../layers.html" />
    <link rel="prev" title="ArcGIS Server Dienst einbinden" href="../add_ags_service.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="../../../index.html" title="Go to homepage">WebGIS 2025 Dokumentation</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="../../../search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Schnellsuche</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Los" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Inhaltsverzeichnis:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../run/index.html">WebGIS Anwendungen Ausführen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../config/index.html">Konfiguration (Postinstallation)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">WebGIS Applikationen</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">WebGIS CMS</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ui.html">CMS Web-Oberfläche</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add_wmts_service.html">WMTS Tilecache Dienst einbinden</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add_ags_service.html">ArcGIS Server Dienst einbinden</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Abfragen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#allgemeine-abfrage-eigenschaften">Allgemeine Abfrage Eigenschaften</a></li>
<li class="toctree-l3"><a class="reference internal" href="#suchfelder">Suchfelder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#auswahllisten">Auswahllisten</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tabelle">Tabelle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../layers.html">Layer-Schaltungen</a></li>
<li class="toctree-l3"><a class="reference internal" href="../presentations.html">Darstellungsvarianten (Layer-Schaltungen für den Viewer bereitstellen)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../editing/index.html">Editieren (Geo-Objekte Bearbeiten)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../secrets/index.html">Secrets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../secrets/index.html#secret-erstellen">Secret erstellen</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/index.html">Berechtigungen (Security)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deploy.html">CMS Veröffentlichen</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html">WebGIS API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../portal/index.html">WebGIS Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../map_builder/index.html">WebGIS MapBuilder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app_builder/index.html">WebGIS AppBuilder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../viewer/index.html">WebGIS Viewer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../extended_config/index.html">Erweiterte Werkzeugkonfiguration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../annex/index.html">Anhang</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="abfragen">
<h1>Abfragen<a class="headerlink" href="#abfragen" title="Permalink to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Dieser Abschnitt kann nicht für <em>dynamische Dienste</em> (siehe vorheriges Kapitel) angewendet werden. Ist bei den Eigenschaften des Dienstes im CMS unter <code class="docutils literal notranslate"><span class="pre">Dynamische</span> <span class="pre">Abfragen</span></code> ein Wert ungleich <code class="docutils literal notranslate"><span class="pre">None</span></code> eingestellt, steht dieser Abschnitt im CMS nicht zur Verfügung.</p>
</div>
<p>Neben der kartographischen Darstellung von <em>Geo-Objekten</em> in einer Karte bieten manche Kartendienste die Möglichkeit, <em>Geo-Objekte</em> zu suchen oder abzufragen. Dazu muss im CMS beim jeweiligen Dienst in den Abschnitt <code class="docutils literal notranslate"><span class="pre">Abfragen</span></code> gewechselt werden:</p>
<img alt="../../../_images/queries1.png" src="../../../_images/queries1.png" />
<p>Dort kann über den Button <code class="docutils literal notranslate"><span class="pre">Neue</span> <span class="pre">Abfrage</span></code> eine neue Abfrage für diesen Dienst erstellt werden. In folgendem Dialog muss zuerst das Thema aus dem Dienst ausgewählt werden, das abgefragt werden soll:</p>
<img alt="../../../_images/queries2.png" src="../../../_images/queries2.png" />
<p>Unter <code class="docutils literal notranslate"><span class="pre">Tabelle</span></code> kann ausgewählt werden, welche Felder für dieses Thema in der Ergebnistabelle beim Erstellen importiert werden sollen:</p>
<ul class="simple">
<li><p><strong>Nichts importieren:</strong> Bei der Erstellung der Abfrage wird nichts importiert. Die gewünschten Felder werden zu einem späteren Zeitpunkt festgelegt.</p></li>
<li><p><strong>Felder dynamisch - (*) importieren:</strong> Es wird für die Tabelle ein Feld mit dem „Feldnamen“ <code class="docutils literal notranslate"><span class="pre">*</span></code> angelegt. Das bedeutet, dass alle Felder in der Tabelle angezeigt werden.
Das Auslesen der vorhandenen Felder erfolgt hier immer zur Laufzeit im <em>Kartenviewer</em>. Ändert sich das Datenmodell hinter dem Layer, werden die Änderungen automatisch im Kartenviewer angepasst.</p></li>
<li><p><strong>Einzelne Felder importieren:</strong> Alle Felder, die zum Zeitpunkt der Erstellung der Abfrage vorhanden sind, werden für die Tabelle übernommen. Spätere Änderungen im Datenmodell müssen nachträglich manuell nachgezogen werden. Diese Option kann für ein schnelles Erstellen von Abfragen hilfreich sein. Die importierten Felder können nach Wunsch im nächsten Schritt im CMS bearbeitet (Feldtyp, Reihenfolge, Bezeichnung) und ergänzt werden.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Nicht alle Diensttypen liefern über die <em>Capabilities</em> Auskunft über die Feldnamen der Themen. Für diese Diensttypen (z.B. WMS) kann die letzte Option auch entfallen.</p>
</div>
<p>Unter <code class="docutils literal notranslate"><span class="pre">Allgemeine</span> <span class="pre">Eigenschaften</span></code> müssen noch ein Name und ein eindeutiger <code class="docutils literal notranslate"><span class="pre">URL</span> <span class="pre">(Name)</span></code> für den Dienst vergeben werden.
Der <code class="docutils literal notranslate"><span class="pre">URL</span> <span class="pre">(Name)</span></code> kann verwendet werden, um über einen parametrierten Aufruf der Karte eine Suche zu übergeben (<code class="docutils literal notranslate"><span class="pre">...&amp;query=adressen&amp;...</span></code>).
Danach kann die Abfrage mit <code class="docutils literal notranslate"><span class="pre">Übernehmen</span></code> erstellt werden. Die Abfrage sollte jetzt in der Liste erscheinen.</p>
<p>Unter der Abfrage findet man folgende Punkte:</p>
<img alt="../../../_images/queries3.png" src="../../../_images/queries3.png" />
<ul class="simple">
<li><p><strong>[Abfragethema] (Eigenschaften):</strong> Eigenschaften der Abfrage.</p></li>
<li><p><strong>Abfragethema:</strong> Das Thema des Dienstes, der abgefragt wird.</p></li>
<li><p><strong>Exportierbare/Benutzerdefinierte Formate:</strong> Hier können spezielle Regeln definiert werden, aus denen Textdateien auf Basis der Abfrageergebnisse erstellt werden. Diese können dann vom Anwender über den Kartenviewer heruntergeladen werden. Wird hier nichts definiert, steht trotzdem ein Export der Daten als CSV zur Verfügung.</p></li>
<li><p><strong>Suchfelder:</strong> Sollten Daten nicht nur abgefragt werden, sondern sollte der Anwender auch die Möglichkeit haben, innerhalb bestimmter Felder zu suchen, können diese Felder hier definiert werden.</p></li>
<li><p><strong>Tabelle:</strong> Hier werden die einzelnen Spalten angeführt, die in der Ergebnistabelle angezeigt werden. Neben einfachen Werte-Spalten können auch Spalten mit <em>Expressions</em> und <em>Hotlinks</em> (setzen sich aus den Werten einer oder mehrerer Spalten zusammen) angelegt werden.</p></li>
<li><p><strong>TOC-Thema für diese Abfrage:</strong> Hier können optional Themen aus diesem oder einem anderen Dienst abgegeben werden, auf die sich die Abfrage bezieht. Stellt der Anwender beim Abfragen <code class="docutils literal notranslate"><span class="pre">sichtbare</span> <span class="pre">Themen</span></code> ein, wird diese Abfrage mit in den Abfrageprozess einbezogen, wenn sich das Abfragethema oder eines der hier angeführten Themen im sichtbaren Kartenbereich befindet.</p></li>
</ul>
</div>
<div class="section" id="allgemeine-abfrage-eigenschaften">
<h1>Allgemeine Abfrage Eigenschaften<a class="headerlink" href="#allgemeine-abfrage-eigenschaften" title="Permalink to this heading">¶</a></h1>
<p>Unter den allgemeinen Eigenschaften einer Abfrage lassen sich folgende Optionen einstellen:</p>
<img alt="../../../_images/queries4.png" src="../../../_images/queries4.png" />
<p>Da eine Beschreibung der einzelnen Eigenschaften über das <code class="docutils literal notranslate"><span class="pre">?</span></code> im Dialog abrufbar ist, wird hier nicht auf alle Details eingegangen.</p>
<p><code class="docutils literal notranslate"><span class="pre">Allgemein</span></code></p>
<ul class="simple">
<li><p><strong>Minimaler Maßstab:</strong> Nach einer Suche wechselt der Kartenviewer-Ausschnitt zum Suchergebnis. Handelt es sich hier nur um einen einzelnen Punkt, kann hier ein Maßstab angegeben werden, auf den gezoomt werden sollte.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Erweiterte</span> <span class="pre">Eigenschaften</span></code></p>
<ul class="simple">
<li><p><strong>Distinct:</strong>
Gibt es Objekte mit identischer Geometrie (z.B. gleicher Punkt) und sind ebenso die in der Abfrage abgeholten Attributwerte identisch, wird ein Objekt in der Ergebnisliste nur einmal angezeigt. Die Daten werden zuerst von der WebGIS-Applikation vom Karten/Feature-Dienst abgeholt und daraus das Distinct berechnet (serverseitig).
Ein Anwendungsbeispiel könnten Kundenbestellungen sein, die alle an die gleiche Adresse geliefert werden. Sollte in der Ergebnistabelle beispielsweise nur der Kundenname und die Adresse angezeigt werden, würden hier für jede Bestellung identische Punkte übereinander als Marker dargestellt werden. Mit <code class="docutils literal notranslate"><span class="pre">Distinct</span></code> würden diese identischen Punkte nur noch als einfacher Marker erscheinen.</p></li>
<li><p><strong>Union:</strong>
Ergebnismarker, die in der Karte am gleichen Ort liegen (identischer Punkt), werden zu einem Objekt zusammengefasst. Der Marker enthält in der Tabellenansicht alle betroffenen ‚Records‘.
Hier kann das gleiche Anwendungsbeispiel wie bei <code class="docutils literal notranslate"><span class="pre">Distinct</span></code> herangezogen werden. Nimmt man in der Tabelle auch die Bestellnummer mit, können die einzelnen Punkte nicht mehr über <code class="docutils literal notranslate"><span class="pre">Distinct</span></code> zusammengefasst werden, weil sich die Bestellnummer bei den einzelnen Punkten unterscheiden wird (Kunde:Bestellungen = 1:n). Damit nicht am selben Ort mehrere Marker in der Karte dargestellt werden müssen, können Marker mit dem gleichen Einfügepunkt zusammengefasst werden. Klickt der Anwender auf einen dieser Marker, werden als Ergebnis alle betroffenen Bestellungen angezeigt. Für jeden <em>Record</em> (Bestellung) wird nur die erste Spalte angezeigt. Der Anwender kann durch Klick auf das erste Attribut den <em>Record</em> aufklappen und sieht dadurch alle Werte.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Kartendienste geben während einer Abfrage immer nur eine maximale Anzahl von Geo-Objekten zurück (z.B. ArcGIS Server Dienste liefern standardmäßig maximal 1000 Ergebnisse zurück). Wird die Option <code class="docutils literal notranslate"><span class="pre">Union</span></code> für eine Abfrage gewählt und die maximale Anzahl von abfragbaren Geo-Objekten überschritten, liefert WebGIS eine Meldung zurück, dass die Abfrage nicht möglich ist. Der Grund ist, dass ansonsten eine nicht vorhandene Vollständigkeit der Daten verschleiert werden würde.
Können nicht alle Geo-Objekte abgefragt werden, würde ein Punkt zwar angezeigt werden, es wäre jedoch nicht gewährleistet, dass die angezeigten <em>Records</em> unter diesem Marker vollständig sind. Daher wird in diesem Fall gar kein Ergebnis mit einem Hinweis angezeigt, damit unvollständige Daten nicht fälschlicherweise als vollständig interpretiert werden.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Um den oben beschriebenen Effekt abzumildern, kann unter „Maximale Anzahl“ ein größerer Wert angegeben werden. Auch wenn der zugrundeliegende Dienst nur maximal 1000 Objekte zurückliefert, kann durch Mehrfachabfragen im Hintergrund versucht werden, alle Geo-Objekte abzuholen. Der Wert sollte allerdings auch nicht zu groß sein, da es sonst zu einer höheren Serverlast kommen kann.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Eine weitere Möglichkeit, den Effekt abzufangen, ist das Einstellen der Option <code class="docutils literal notranslate"><span class="pre">Layer</span> <span class="pre">Zoomgrenzen</span> <span class="pre">anwenden</span></code>. Die Abfrage kann dann nur mehr durchgeführt werden, wenn der Anwender in der Karte innerhalb der Maßstabsgrenzen des Abfragethemas ist. Die Zoomgrenzen werden dabei im Kartendienst definiert. Dieser Wert ist auch sinnvoll, wenn diese Abfrage als <em>dynamischer Inhalt</em> über den MapBuilder oder über eine <em>Dynamische Content Marker</em>-Darstellungsvariante eingebunden wird.</p>
</div>
</div>
<div class="section" id="suchfelder">
<h1>Suchfelder<a class="headerlink" href="#suchfelder" title="Permalink to this heading">¶</a></h1>
<p>Suchfelder können für eine Abfrage optional parametriert werden. Enthält eine Abfrage keine Suchfelder,
kann das Thema <em>nur</em> abgefragt werden (z.B. mit dem Identify-Werkzeug).
Werden Suchfelder definiert, erscheint die Abfrage im <em>Karten Viewer</em> zusätzlich unter „Detailsuche“.</p>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Nicht alle Dienst-Typen unterstützen das Suchen innerhalb eines Themas, z.B. WMS.</p>
</div>
<p>Zum Anlegen eines Suchfeldes muss in den Bereich <code class="docutils literal notranslate"><span class="pre">Suchfelder</span></code> gewechselt und auf <code class="docutils literal notranslate"><span class="pre">Suchbegriff</span> <span class="pre">hinzufügen</span></code>
geklickt werden.</p>
<p>Im Dialog muss zuerst das Feld ausgewählt werden, in dem gesucht werden soll.
Unter <code class="docutils literal notranslate"><span class="pre">Abfragemethode</span></code> kann eingestellt werden, wie im entsprechenden Feld gesucht werden soll.
Mit <code class="docutils literal notranslate"><span class="pre">Exact</span></code> muss der Anwender beispielsweise den Suchbegriff exakt so eingeben, wie er in der
Datenbank angeführt wird (sinnvoll bei IDs, Zahlen). Meistens ist es anwenderfreundlicher,
wenn automatisch mit <em>Wildcards</em> gesucht wird. Mit <code class="docutils literal notranslate"><span class="pre">EndingWildcard</span></code> wird automatisch nach dem
eingegebenen Suchbegriff ein Wildcard (* oder %) angehängt. So werden alle Geo-Objekte gefunden,
bei denen das entsprechende Attribut mit dem eingegebenen Suchbegriff beginnt. In der Auswahlliste
werden noch weitere Optionen angezeigt, die beispielsweise alle Leerzeichen durch <em>Wildcards</em>
ersetzen (<code class="docutils literal notranslate"><span class="pre">SpacesToWildcard</span></code>, <code class="docutils literal notranslate"><span class="pre">SpacesToWildcardWithEndingWildcard</span></code>, …).</p>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Damit die Suche performant ausgeführt wird, sollte darauf geachtet werden, dass die Suchfelder
in der Datenbank entsprechend indiziert sind.</p>
</div>
<p>Abschließend muss noch ein Name angegeben werden, der in der Suchmaske für dieses Feld angezeigt
wird. Unter <code class="docutils literal notranslate"><span class="pre">Url</span></code> sollte eine für diese Abfrage eindeutige ID für das Feld eingetragen werden.
Ruft man den <em>Karten Viewer</em> auf, können so Parameter in der URL mitgegeben werden, die schon
beim Start eine Abfrage ausführen. Die entsprechenden Parameter für die Suchfelder entsprechen
dem hier eingetragenen (<code class="docutils literal notranslate"><span class="pre">...&amp;query=adressen&amp;adresse=hauptplatz...</span></code>).</p>
<p>Schließt man den Dialog mit <code class="docutils literal notranslate"><span class="pre">Übernehmen</span></code>, sollte der Suchbegriff in der Liste erscheinen.
Dort können die Eigenschaften auch noch nachträglich bearbeitet und die Reihenfolge der
Suchbegriffe geändert werden. Über die Eigenschaften können auch noch weitere Optionen wie
Auswahllisten, Whitelists, usw. parametriert werden.</p>
</div>
<div class="section" id="auswahllisten">
<h1>Auswahllisten<a class="headerlink" href="#auswahllisten" title="Permalink to this heading">¶</a></h1>
<p>Um die Eingabe von Suchbegriffen für den Anwender zu erleichtern, können Auswahllisten angeboten werden.
Wenn der Anwender ein Zeichen in einem Suchfeld eingibt, wird im Hintergrund die Datenbank abgefragt und
dem Anwender daraus Vorschläge angeboten.</p>
<p>Auswahllisten funktionieren auch kaskadierend: Bereits eingegebene Suchbegriffe können berücksichtigt werden.
(Beispiel: Es werden nur Grundstücke einer KG angeboten, wenn bereits die KG-Nummer eingegeben wurde).</p>
<p>Gehen wir von einer Grundstückssuche aus, in der der Anwender eine KG-Nummer oder einen KG-Namen
und eine Grundstücksnummer eingeben kann:</p>
<img alt="../../../_images/queries10.png" src="../../../_images/queries10.png" />
<p>Die Datenbank-Felder zum Abfragen heißen im Beispiel:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">KG</span></code>: Eingabefeld ID - <code class="docutils literal notranslate"><span class="pre">kg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KG_NAME</span></code>: Eingabefeld ID - <code class="docutils literal notranslate"><span class="pre">kgname</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GNR</span></code>: Eingabefeld ID - <code class="docutils literal notranslate"><span class="pre">gnr</span></code></p></li>
</ul>
<p>Damit Auswahllisten funktionieren, muss das beim entsprechenden Suchfeld bei den Eigenschaften angegeben werden:</p>
<img alt="../../../_images/queries11.png" src="../../../_images/queries11.png" />
<p>Über den Auswahllisten-Editor kann das entsprechende SQL-Statement definiert werden:</p>
<img alt="../../../_images/queries12.png" src="../../../_images/queries12.png" />
<p>Unter <em>ConnectionString</em> kann die Verbindung zur Datenbank angegeben werden, die abgefragt werden soll.</p>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Verwendet man als Server <em>ArcGIS Server</em> oder <em>gView</em> (über die GeoServices REST-Schnittstelle), muss
keine direkte Verbindung zur Datenbank angegeben werden. Hier kann die Abfrage der Auswahllisten-Werte
direkt über den <em>MapServer</em> erfolgen (empfohlen).
In diesem Fall gibt man als <em>ConnectionString</em> einfach das Kürzel <code class="docutils literal notranslate"><span class="pre">#</span></code> an.</p>
</div>
<p>Unter <em>SqlStatement</em> wird jetzt der Ausdruck angegeben, der für die Suche verwendet wird. Bei einer Datenbank-
Abfrage mit <em>ConnectionString</em> ist das in der Regel ein komplettes <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">FROM</span> <span class="pre">WHERE</span></code>-Statement.
Verwendet man den <em>MapServer</em> zur Abfrage (ConnectionString = <code class="docutils literal notranslate"><span class="pre">#</span></code>), gibt man hier nur die <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>-Klausel an (ohne WHERE).</p>
<p>Als Platzhalter können die Namen der Suchbegriffe eingegeben werden (z.B. <code class="docutils literal notranslate"><span class="pre">{{kg}}</span></code>, Wildcards nicht vergessen).</p>
<p>Für unser Beispiel könnten die <em>SqlStatements</em> wie folgt aussehen:</p>
<p><strong>KG</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KG</span> <span class="n">like</span> <span class="s1">&#39;{{kg}}%&#39;</span>
</pre></div>
</div>
<p><strong>KG Name</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KG_NAME</span> <span class="n">like</span> <span class="s1">&#39;{{kgname}}%&#39;</span>
</pre></div>
</div>
<p><strong>Grundstücksnummer</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GNR</span> <span class="n">like</span> <span class="s1">&#39;{{gnr}}%&#39;</span>

<span class="c1">#if kg</span>
  <span class="n">AND</span> <span class="n">KG</span><span class="o">=</span><span class="s1">&#39;{{kg}}&#39;</span>
<span class="c1">#endif</span>

<span class="c1">#if kgname</span>
  <span class="n">AND</span> <span class="n">KG</span><span class="o">=</span><span class="s1">&#39;{{kgname}}&#39;</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>Hier wird die Abfrage noch weiter eingeschränkt, wenn bereits eine KG-Nummer oder ein KG-Name eingegeben wurde.
Über die <code class="docutils literal notranslate"><span class="pre">#if</span></code>-Direktiven kann hier erzwungen werden, dass der entsprechende Code-Teil nur ins Statement aufgenommen
wird, wenn der Anwender für dieses Feld einen Wert eingegeben hat.</p>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Hier im Beispiel wurden für alle drei Eingabefelder Auswahllisten definiert.
Das ist nicht zwingend erforderlich. Wenn es für die Aufgabe sinnvoll ist, kann auch
nur ein Eingabefeld Auswahllisten anbieten.</p>
</div>
</div>
<div class="section" id="tabelle">
<h1>Tabelle<a class="headerlink" href="#tabelle" title="Permalink to this heading">¶</a></h1>
<p>Hier wird angeführt, welche Felder in der Ergebnisliste angezeigt werden. Damit die Abfrage
funktioniert, müssen hier Werte eingetragen werden. Eine Ausnahme stellen hier WMS-Dienste dar,
wo das Schema der Daten nicht über die <em>Capabilities</em> bekannt ist. Hier kann in der
Regel keine Tabelle definiert werden.</p>
<p>Hat man beim Erstellen der Abfrage (siehe oben) unter Tabelle <code class="docutils literal notranslate"><span class="pre">Felder</span> <span class="pre">dynamisch</span> <span class="pre">importieren</span></code>
ausgewählt, befindet sich unter <code class="docutils literal notranslate"><span class="pre">Tabelle</span></code> bereits eine <em>Spalte</em>:</p>
<img alt="../../../_images/queries6.png" src="../../../_images/queries6.png" />
<p>Hierbei handelt es sich um einen Sonderfall: Als Feld wird hier <code class="docutils literal notranslate"><span class="pre">*</span></code> angeführt, was
bedeutet, dass die Felder automatisch zur Laufzeit bestimmt werden. Alle Attribute, die von
einer Abfrage vom <em>Kartendienst</em> zurückgeliefert werden können, werden angezeigt.</p>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Diese Option kann auch verwendet werden, wenn bei einem WMS-Dienst als <code class="docutils literal notranslate"><span class="pre">GetFeatures</span> <span class="pre">Type</span></code>
beispielsweise <code class="docutils literal notranslate"><span class="pre">application/geojson</span></code> oder <code class="docutils literal notranslate"><span class="pre">txt/xml</span></code> eingestellt wird. Dann werden auch
hier alle Felder in die Tabelle übernommen. Alternativ könnten hier auch die einzelnen
Felder manuell angelegt werden.</p>
</div>
<p>Möchte man mehr Kontrolle über die Tabelle haben, können hier Felder auch einzeln angegeben werden.
Dazu kann der Button <code class="docutils literal notranslate"><span class="pre">Mehrere</span> <span class="pre">Spalten</span> <span class="pre">hinzufügen</span></code> und <code class="docutils literal notranslate"><span class="pre">Spalte</span> <span class="pre">hinzufügen</span></code> verwendet werden.
Der erste Punkt funktioniert allerdings nur, wenn der zugrunde liegende Dienst auch Auskunft
über das Datenschema der einzelnen Themen liefert (AGS, IMS, …).</p>
<p>Wurden Spalten hinzugefügt, kann die Eigenschaften weiter bearbeitet werden:</p>
<img alt="../../../_images/queries7.png" src="../../../_images/queries7.png" />
<p>Der <code class="docutils literal notranslate"><span class="pre">Spalten-Typ</span></code> gibt an, was in der Tabellenspalte angezeigt wird. Der Standardwert ist
hier <code class="docutils literal notranslate"><span class="pre">Field</span></code>, was bedeutet, dass in der Spalte der Wert eines Attributs des Geo-Objektes angezeigt
wird. Unter <code class="docutils literal notranslate"><span class="pre">Definition</span> <span class="pre">/</span> <span class="pre">Quelle</span></code> muss für diesen Typ ein Feld aus dem Abfragethema angeführt
werden:</p>
<img alt="../../../_images/queries8.png" src="../../../_images/queries8.png" />
<p>Wählt man als <code class="docutils literal notranslate"><span class="pre">Spalten-Typ</span></code> beispielsweise <code class="docutils literal notranslate"><span class="pre">Hotlink</span></code>, erscheint in der Tabelle ein <em>Hotlink</em>, über
den der Anwender auf eine neue Seite weitergeleitet werden kann. Unter <code class="docutils literal notranslate"><span class="pre">Definition</span> <span class="pre">/</span> <span class="pre">Quelle</span></code>
kann hier eine <code class="docutils literal notranslate"><span class="pre">Hotlink-URL</span></code> angegeben werden. In dieser URL können Felder aus dem
entsprechenden Geo-Objekt als Platzhalter (in eckigen Klammern) angeführt werden:</p>
<img alt="../../../_images/queries9.png" src="../../../_images/queries9.png" />
<p>Unter <code class="docutils literal notranslate"><span class="pre">Name</span> <span class="pre">/</span> <span class="pre">Bezeichnung</span> <span class="pre">des</span> <span class="pre">Hotlinks</span></code> kann eingetragen werden, mit welchem Text der Hotlink in der
Tabelle angezeigt wird.</p>
<p><code class="docutils literal notranslate"><span class="pre">1:n</span></code> gibt an, ob der Link für alle Zeilen einer Tabelle aufgerufen werden kann. Dabei kann auch ein
Trennzeichen angegeben werden, mit dem die einzelnen Werte in der URL getrennt werden.</p>
<p>Weitere Spalten-Typen sind beispielsweise:</p>
<ul class="simple">
<li><p><strong>Expression:</strong>
Hier kann ein <em>Ausdruck</em> bestehend aus (mehreren) Feldern und freiem Text angegeben werden.
Die Platzhalter für die Felder werden wieder in eckigen Klammern angegeben, z.B.: <code class="docutils literal notranslate"><span class="pre">Fläche:</span> <span class="pre">[THE_AREA_FIELD]m²</span></code>.
Zusätzlich können bei Expression auch Funktionen zum Berechnen und Formatieren verwendet werden (siehe unten).</p></li>
<li><p><strong>ImageExpression:</strong>
Wie Hotlink, nur muss die Ziel-URL eine Bilddatei sein. Das Bild wird in der Ergebnistabelle
angezeigt. Die Größe kann eingestellt werden.</p></li>
<li><p><strong>EmailAddress, PhoneNumber:</strong>
Das Ergebnis wird als anklickbare E-Mail-Adresse oder Telefonnummer in der Tabelle dargestellt.</p></li>
<li><p><strong>DateTime:</strong>
Das Ergebnis wird als Datum dargestellt. Unter Definition kann dabei eingestellt
werden, wie das Datum formatiert werden soll.</p></li>
</ul>
<div class="section" id="funktionen-innerhalb-von-expressions">
<h2>Funktionen innerhalb von Expressions<a class="headerlink" href="#funktionen-innerhalb-von-expressions" title="Permalink to this heading">¶</a></h2>
<p>Bei Tabellenspalten vom Typ <em>Expression</em> können innerhalb des Ausdrucks neben den oben angeführten Platzhaltern für Felder in eckigen Klammern
auch Funktionen eingefügt werden. Diese dienen für spezielle Berechnungen und Formatierungen des Feldes.</p>
<p>Funktionen beginnen immer mit <code class="docutils literal notranslate"><span class="pre">$</span></code> gefolgt vom Funktionsnamen. Das Argument wird der Funktion in Klammern übergeben, z.B. <code class="docutils literal notranslate"><span class="pre">$eval(42*42)</span></code>,
Attribute aus dem aktuellen Objekt werden der Funktion wieder als Platzhalter in eckigen Klammern übergeben, z.B. <code class="docutils literal notranslate"><span class="pre">$eval([THE_AREA_FIELD]*42)</span></code>.</p>
<p>Folgende Funktionen stehen zur Verfügung:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$eval()</span></code>: Berechnet einen mathematischen Ausdruck (Addition, Subtraktion, Multiplikation, Division), z.B. <code class="docutils literal notranslate"><span class="pre">$eval(11+1)</span></code>, <code class="docutils literal notranslate"><span class="pre">$eval([AREA]*[COST])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$sin()</span></code>, <code class="docutils literal notranslate"><span class="pre">$cos()</span></code>, <code class="docutils literal notranslate"><span class="pre">$tan()</span></code>, <code class="docutils literal notranslate"><span class="pre">$asin()</span></code>, <code class="docutils literal notranslate"><span class="pre">$acos()</span></code>, <code class="docutils literal notranslate"><span class="pre">$atan()</span></code>: Winkelfunktionen. Die Berechnung und das Ergebnis beziehen sich immer auf das Bogenmaß.
Für Umrechnungen kann die Funktion <code class="docutils literal notranslate"><span class="pre">$pi()</span></code> verwendet werden, z.B. <code class="docutils literal notranslate"><span class="pre">$sin(45.0*$pi()/180.0)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$round0()</span></code> … <code class="docutils literal notranslate"><span class="pre">$round5()</span></code>: Rundet den übergebenen Wert. Die Zahl gibt die Nummer der Nachkommastellen an, z.B. <code class="docutils literal notranslate"><span class="pre">$round0(100.123)</span></code>, <code class="docutils literal notranslate"><span class="pre">$round2([AREA])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$n0()</span></code> … <code class="docutils literal notranslate"><span class="pre">$n5()</span></code>: Wandelt eine Zahl ins <em>Standard Numeric Format</em> um. Dieses Format fügt beispielsweise Tausender-Punkte in eine Zahl ein (1000 =&gt; 1.000).
Die Zahl gibt die Nummer der Nachkommastellen an. Diese Funktion kann also auch als Alternative zu <code class="docutils literal notranslate"><span class="pre">$round</span></code> verwendet werden.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$n0_de()</span></code> … <code class="docutils literal notranslate"><span class="pre">$n5_de()</span></code>: Mit der Funktion <code class="docutils literal notranslate"><span class="pre">$n()</span></code> erfolgt die Darstellung in der aktuellen <code class="docutils literal notranslate"><span class="pre">Culture</span></code> des Servers. Ist die Sprache am Server Englisch,
werden die Ergebnisse eventuell nicht richtig formatiert (1000,123 =&gt; 1,000.123). Um das zu vermeiden, kann mit der <code class="docutils literal notranslate"><span class="pre">$n0_de()</span></code> die deutsche Darstellung erzwungen werden.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Die einzelnen Funktionen können auch verschachtelt werden:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$round2($eval([AREA]*[COST]))</span> <span class="pre">€</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$n2_de($eval([AREA]*[COST]))</span> <span class="pre">€</span></code></p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p><code class="docutils literal notranslate"><span class="pre">$n0()</span></code> bzw. <code class="docutils literal notranslate"><span class="pre">$n0_de()</span></code> sollte immer die äußerste Funktion sein. Verwendet man das Ergebnis zur Berechnung von weiteren Ergebnissen,
kann es zu Fehlern kommen, weil Berechnungsfunktionen mit Tausender-Punkten nicht umgehen können:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$eval($n0([AREA])*$n2([COST]))</span> <span class="pre">€</span></code> =&gt; FALSCH</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$eval($round0([AREA])*$round2([COST]))</span> <span class="pre">€</span></code> =&gt; RICHTIG</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$n2_de($eval($round0([AREA])*$round2([COST])))</span> <span class="pre">€</span></code> =&gt; RICHTIG</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Macht man im Ausdruck einen syntaktischen Fehler (Parametrierfehler), wird das als Exception in der Ergebnisliste angezeigt (betrifft alle Zeilen in der Tabelle).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Entsteht ein Fehler bei der Rechnung des Wertes, weil in einem Feld <code class="docutils literal notranslate"><span class="pre">COST</span></code> beispielsweise kein gültiger Zahlenwert steht, ist das Ergebnis in der
Tabelle <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (Not a Number). Das betrifft dann nur die entsprechenden Zeilen in der Tabelle.</p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Abfragen</a></li>
<li><a class="reference internal" href="#allgemeine-abfrage-eigenschaften">Allgemeine Abfrage Eigenschaften</a></li>
<li><a class="reference internal" href="#suchfelder">Suchfelder</a></li>
<li><a class="reference internal" href="#auswahllisten">Auswahllisten</a></li>
<li><a class="reference internal" href="#tabelle">Tabelle</a><ul>
<li><a class="reference internal" href="#funktionen-innerhalb-von-expressions">Funktionen innerhalb von Expressions</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="../add_ags_service.html">
                    <span class="icon">&lt;</span><span>ArcGIS Server Dienst einbinden</span></a>
                
            </div>

            <div class="right">
                
                    <a href="../layers.html"><span>Layer-Schaltungen</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, ENIE.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>